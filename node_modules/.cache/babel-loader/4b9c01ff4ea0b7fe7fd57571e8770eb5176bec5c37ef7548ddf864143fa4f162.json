{"ast":null,"code":"var _regeneratorRuntime = require(\"C:/Users/DELL/OneDrive/Desktop/Textractor/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/DELL/OneDrive/Desktop/Textractor/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar axios = require('axios');\nvar resolveURL = require('resolve-url');\n\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nvar readFromBlobOrFile = function readFromBlobOrFile(blob) {\n  return new Promise(function (resolve, reject) {\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = function (_ref) {\n      var code = _ref.target.error.code;\n      reject(Error(\"File could not be read! Code=\".concat(code)));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  });\n};\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nvar loadImage = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(image) {\n    var data, _yield$axios$get, _data;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          data = image;\n          if (!(typeof image === 'undefined')) {\n            _context2.next = 3;\n            break;\n          }\n          return _context2.abrupt(\"return\", 'undefined');\n        case 3:\n          if (!(typeof image === 'string')) {\n            _context2.next = 15;\n            break;\n          }\n          if (!/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n            _context2.next = 8;\n            break;\n          }\n          data = atob(image.split(',')[1]).split('').map(function (c) {\n            return c.charCodeAt(0);\n          });\n          _context2.next = 13;\n          break;\n        case 8:\n          _context2.next = 10;\n          return axios.get(resolveURL(image), {\n            responseType: 'arraybuffer'\n          });\n        case 10:\n          _yield$axios$get = _context2.sent;\n          _data = _yield$axios$get.data;\n          data = _data;\n        case 13:\n          _context2.next = 33;\n          break;\n        case 15:\n          if (!(image instanceof HTMLElement)) {\n            _context2.next = 29;\n            break;\n          }\n          if (!(image.tagName === 'IMG')) {\n            _context2.next = 20;\n            break;\n          }\n          _context2.next = 19;\n          return loadImage(image.src);\n        case 19:\n          data = _context2.sent;\n        case 20:\n          if (!(image.tagName === 'VIDEO')) {\n            _context2.next = 24;\n            break;\n          }\n          _context2.next = 23;\n          return loadImage(image.poster);\n        case 23:\n          data = _context2.sent;\n        case 24:\n          if (!(image.tagName === 'CANVAS')) {\n            _context2.next = 27;\n            break;\n          }\n          _context2.next = 27;\n          return new Promise(function (resolve) {\n            image.toBlob( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(blob) {\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return readFromBlobOrFile(blob);\n                    case 2:\n                      data = _context.sent;\n                      resolve();\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }, _callee);\n              }));\n              return function (_x2) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          });\n        case 27:\n          _context2.next = 33;\n          break;\n        case 29:\n          if (!(image instanceof File || image instanceof Blob)) {\n            _context2.next = 33;\n            break;\n          }\n          _context2.next = 32;\n          return readFromBlobOrFile(image);\n        case 32:\n          data = _context2.sent;\n        case 33:\n          return _context2.abrupt(\"return\", new Uint8Array(data));\n        case 34:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function loadImage(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nmodule.exports = loadImage;","map":{"version":3,"names":["axios","require","resolveURL","readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","code","target","error","Error","readAsArrayBuffer","loadImage","image","data","test","atob","split","map","c","charCodeAt","get","responseType","_data","HTMLElement","tagName","src","poster","toBlob","File","Blob","Uint8Array","module","exports"],"sources":["C:/Users/DELL/OneDrive/Desktop/Textractor/node_modules/tesseract.js/src/worker/browser/loadImage.js"],"sourcesContent":["const axios = require('axios');\nconst resolveURL = require('resolve-url');\n\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nconst readFromBlobOrFile = blob => (\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = ({ target: { error: { code } } }) => {\n      reject(Error(`File could not be read! Code=${code}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  })\n);\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nconst loadImage = async (image) => {\n  let data = image;\n  if (typeof image === 'undefined') {\n    return 'undefined';\n  }\n\n  if (typeof image === 'string') {\n    // Base64 Image\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n      data = atob(image.split(',')[1])\n        .split('')\n        .map(c => c.charCodeAt(0));\n    } else {\n      const { data: _data } = await axios.get(resolveURL(image), { responseType: 'arraybuffer' });\n      data = _data;\n    }\n  } else if (image instanceof HTMLElement) {\n    if (image.tagName === 'IMG') {\n      data = await loadImage(image.src);\n    }\n    if (image.tagName === 'VIDEO') {\n      data = await loadImage(image.poster);\n    }\n    if (image.tagName === 'CANVAS') {\n      await new Promise((resolve) => {\n        image.toBlob(async (blob) => {\n          data = await readFromBlobOrFile(blob);\n          resolve();\n        });\n      });\n    }\n  } else if (image instanceof File || image instanceof Blob) {\n    data = await readFromBlobOrFile(image);\n  }\n\n  return new Uint8Array(data);\n};\n\nmodule.exports = loadImage;\n"],"mappings":";;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC9B,IAAMC,UAAU,GAAGD,OAAO,CAAC,aAAa,CAAC;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAME,kBAAkB,GAAG,SAArBA,kBAAkB,CAAGC,IAAI;EAAA,OAC7B,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IAC/B,IAAMC,UAAU,GAAG,IAAIC,UAAU,EAAE;IACnCD,UAAU,CAACE,MAAM,GAAG,YAAM;MACxBJ,OAAO,CAACE,UAAU,CAACG,MAAM,CAAC;IAC5B,CAAC;IACDH,UAAU,CAACI,OAAO,GAAG,gBAAqC;MAAA,IAAfC,IAAI,QAAvBC,MAAM,CAAIC,KAAK,CAAIF,IAAI;MAC7CN,MAAM,CAACS,KAAK,wCAAiCH,IAAI,EAAG,CAAC;IACvD,CAAC;IACDL,UAAU,CAACS,iBAAiB,CAACb,IAAI,CAAC;EACpC,CAAC,CAAC;AAAA,CACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMc,SAAS;EAAA,uEAAG,kBAAOC,KAAK;IAAA;IAAA;MAAA;QAAA;UACxBC,IAAI,GAAGD,KAAK;UAAA,MACZ,OAAOA,KAAK,KAAK,WAAW;YAAA;YAAA;UAAA;UAAA,kCACvB,WAAW;QAAA;UAAA,MAGhB,OAAOA,KAAK,KAAK,QAAQ;YAAA;YAAA;UAAA;UAAA,KAEvB,wCAAwC,CAACE,IAAI,CAACF,KAAK,CAAC;YAAA;YAAA;UAAA;UACtDC,IAAI,GAAGE,IAAI,CAACH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7BA,KAAK,CAAC,EAAE,CAAC,CACTC,GAAG,CAAC,UAAAC,CAAC;YAAA,OAAIA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC;UAAA,EAAC;UAAC;UAAA;QAAA;UAAA;UAAA,OAEC1B,KAAK,CAAC2B,GAAG,CAACzB,UAAU,CAACiB,KAAK,CAAC,EAAE;YAAES,YAAY,EAAE;UAAc,CAAC,CAAC;QAAA;UAAA;UAA7EC,KAAK,oBAAXT,IAAI;UACZA,IAAI,GAAGS,KAAK;QAAC;UAAA;UAAA;QAAA;UAAA,MAENV,KAAK,YAAYW,WAAW;YAAA;YAAA;UAAA;UAAA,MACjCX,KAAK,CAACY,OAAO,KAAK,KAAK;YAAA;YAAA;UAAA;UAAA;UAAA,OACZb,SAAS,CAACC,KAAK,CAACa,GAAG,CAAC;QAAA;UAAjCZ,IAAI;QAAA;UAAA,MAEFD,KAAK,CAACY,OAAO,KAAK,OAAO;YAAA;YAAA;UAAA;UAAA;UAAA,OACdb,SAAS,CAACC,KAAK,CAACc,MAAM,CAAC;QAAA;UAApCb,IAAI;QAAA;UAAA,MAEFD,KAAK,CAACY,OAAO,KAAK,QAAQ;YAAA;YAAA;UAAA;UAAA;UAAA,OACtB,IAAI1B,OAAO,CAAC,UAACC,OAAO,EAAK;YAC7Ba,KAAK,CAACe,MAAM;cAAA,uEAAC,iBAAO9B,IAAI;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACTD,kBAAkB,CAACC,IAAI,CAAC;oBAAA;sBAArCgB,IAAI;sBACJd,OAAO,EAAE;oBAAC;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACX;cAAA;gBAAA;cAAA;YAAA,IAAC;UACJ,CAAC,CAAC;QAAA;UAAA;UAAA;QAAA;UAAA,MAEKa,KAAK,YAAYgB,IAAI,IAAIhB,KAAK,YAAYiB,IAAI;YAAA;YAAA;UAAA;UAAA;UAAA,OAC1CjC,kBAAkB,CAACgB,KAAK,CAAC;QAAA;UAAtCC,IAAI;QAAA;UAAA,kCAGC,IAAIiB,UAAU,CAACjB,IAAI,CAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAC5B;EAAA,gBApCKF,SAAS;IAAA;EAAA;AAAA,GAoCd;AAEDoB,MAAM,CAACC,OAAO,GAAGrB,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}